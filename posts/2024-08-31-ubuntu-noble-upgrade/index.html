



  




<!doctype html>
<html
  lang="en-us"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"
><head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#FFFFFF" />
  
  <title>Ubuntu Noble 24.04 Upgrade Notes &middot; Eric&#39;s Web.site</title>
    <meta name="title" content="Ubuntu Noble 24.04 Upgrade Notes &middot; Eric&#39;s Web.site" />
  
  
  
  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js"
    integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="
  ></script>
  
  
  
  
  
  
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.b0785c8131a75f72b211435af86269eb2d4b81dda03a8f2cf5ccb1c967747167.css"
    integrity="sha256-sHhcgTGnX3KyEUNa&#43;GJp6y1Lgd2gOo8s9cyxyWd0cWc="
  />
  
  
  
  
  
  
  
  <meta
    name="description"
    content="
      
        This article was written to describe my experience performing an in-place upgrade of my home server to Ubuntu Noble Numbat 24.04.
I&rsquo;m writing this during the process; my intent is to outline my experience with the upgrade for others considering the upgrade, and to document any problems I encounter. I like to update my stuff aggressively, as a personal preference (but still use LTS only).
Upshot #This section was written after all others, to give a final outline of what happened and avoid burying the lede.
      
    "
  />
  
  
  
  <link rel="canonical" href="https://ericsweb.site/posts/2024-08-31-ubuntu-noble-upgrade/" />
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:url" content="https://ericsweb.site/posts/2024-08-31-ubuntu-noble-upgrade/">
  <meta property="og:site_name" content="Eric&#39;s Web.site">
  <meta property="og:title" content="Ubuntu Noble 24.04 Upgrade Notes">
  <meta property="og:description" content="This article was written to describe my experience performing an in-place upgrade of my home server to Ubuntu Noble Numbat 24.04.
I’m writing this during the process; my intent is to outline my experience with the upgrade for others considering the upgrade, and to document any problems I encounter. I like to update my stuff aggressively, as a personal preference (but still use LTS only).
Upshot #This section was written after all others, to give a final outline of what happened and avoid burying the lede.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Ubuntu Noble 24.04 Upgrade Notes">
  <meta name="twitter:description" content="This article was written to describe my experience performing an in-place upgrade of my home server to Ubuntu Noble Numbat 24.04.
I’m writing this during the process; my intent is to outline my experience with the upgrade for others considering the upgrade, and to document any problems I encounter. I like to update my stuff aggressively, as a personal preference (but still use LTS only).
Upshot #This section was written after all others, to give a final outline of what happened and avoid burying the lede.">

  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Ubuntu Noble 24.04 Upgrade Notes",
    "headline": "Ubuntu Noble 24.04 Upgrade Notes",
    
    "abstract": "This article was written to describe my experience performing an in-place upgrade of my home server to Ubuntu Noble Numbat 24.04.\nI\u0026rsquo;m writing this during the process; my intent is to outline my experience with the upgrade for others considering the upgrade, and to document any problems I encounter. I like to update my stuff aggressively, as a personal preference (but still use LTS only).\nUpshot #This section was written after all others, to give a final outline of what happened and avoid burying the lede.",
    "inLanguage": "en-us",
    "url" : "https:\/\/ericsweb.site\/posts\/2024-08-31-ubuntu-noble-upgrade\/",
    "author" : {
      "@type": "Person",
      "name": ""
    },
    
    
    
    
    
    
    "keywords": ["open-source","oss","foss","ubuntu","home-server","noble","noble numbat","24.04"],
    
    "mainEntityOfPage": "true",
    "wordCount": "692"
  }
  </script>
    
    <script type="application/ld+json">
    {
   "@context": "https://schema.org",
   "@type": "BreadcrumbList",
   "itemListElement": [
     {
       "@type": "ListItem",
       "item": "https://ericsweb.site/",
       "name": "Index",
       "position": 1
     },
     {
       "@type": "ListItem",
       "item": "https://ericsweb.site/posts/",
       "name": "Posts",
       "position": 2
     },
     {
       "@type": "ListItem",
       "item": "https://ericsweb.site/categories/open-source/",
       "name": "Open-Source",
       "position": 3
     },
     {
       "@type": "ListItem",
       "name": "Ubuntu Noble 24.04 Upgrade Notes",
       "position": 4
     }
   ]
 }
  </script>

  
  
  
  
  






  
  
  
  
  
  
  




  
  
</head>
<body
    class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content"
        ><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span
        >Skip to main content</a
      >
    </div>
    
    
      <header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden">
  <nav class="flex items-start justify-between sm:items-center">
    
    <div class="flex flex-row items-center">
      
  <a
    class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
    rel="me"
    href="/"
    >Eric&rsquo;s Web.site</a
  >

    </div>
    
    
      <ul class="flex list-none flex-col text-end sm:flex-row">
        
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/posts/"
                  title=""
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >All Posts</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/categories/"
                  title=""
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Categories</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/profile/"
                  title=""
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >About</span
                    >
                  </a
                >
              
            </li>
          
          
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex grow flex-col">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
        <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="hidden inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="/"
      >Index</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class=" inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="/posts/"
      >Posts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="hidden inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="/posts/2024-08-31-ubuntu-noble-upgrade/"
      >Ubuntu Noble 24.04 Upgrade Notes</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


      
      <h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Ubuntu Noble 24.04 Upgrade Notes
      </h1>
      
        <div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
          





  
  



  

  
  
    
  

  

  

  
    
  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="0001-01-01 00:00:00 &#43;0000 UTC">January 1, 1</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">4 mins</span>
    

    
    
  </div>

  
  


        </div>
      
      
    </header>
    <section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row">
      
      <div class="min-h-0 min-w-0 max-w-prose grow">
        <p>This article was written to describe my experience performing an in-place upgrade of my home server
to Ubuntu Noble Numbat 24.04.</p>
<p>I&rsquo;m writing this during the process; my intent is to outline my experience with the upgrade for others considering the upgrade, and to document any problems I encounter. I like to update my stuff aggressively, as a personal preference (but still use LTS only).</p>
<h2 id="upshot" class="relative group">Upshot <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#upshot" aria-label="Anchor">#</a></span></h2><p>This section was written after all others, to give a final outline of what happened and avoid burying the lede.</p>
<p>Overall, it went very smoothly. I would say this is the smoothest in-pace ubuntu LTS upgrade I&rsquo;ve experienced. The process itself took about 30 minutes, but required another 20-30 minutes of validation and fiddling. The upgrade process does not coach you very well on how to handle extra apt lists; for anyone with lots of extras, I would suggest validating that your extra apt sources support noble before upgrading.</p>
<p>The problems in my upgrade:</p>
<ol>
<li>Samba seemed to misbehave during the upgrade, but it recovered after the upgrade was complete.</li>
<li>I had a few broken apt dependencies, seemingly centered around <code>libavcodec58</code>. However, these did not seem to have any impact, and were fixable with <code>sudo apt install --fix-broken</code>.</li>
<li>The system did not automatically update my third-party apt sources, and did not coach me well on how to move forward with those.</li>
</ol>
<p>Very minor problems for a major distro upgrade, but I want to note them nonetheless.</p>
<h3 id="advice" class="relative group">Advice <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#advice" aria-label="Anchor">#</a></span></h3><ul>
<li>Take a full host backup before performing the upgrade.</li>
<li>If your system is running DNS, set up an alternative system before switching over—it brings much piece of mind.</li>
<li>Do LTS upgrades with a clear mind, avoid distractions, and do it during the day and far from bedtime or other obligations.</li>
<li>Read through your apt lists beforehand, and look into what the support level is for the new version from the vendor <strong>before</strong> you upgrade.</li>
<li>Running more of your apps in containers is a great way to reduce the impact of an LTS upgrade (and update sooner).</li>
<li>When the upgrader asks you if you want to accept a new version of a file, you should almost always say &ldquo;no&rdquo; for core system components, especially SSH and anything relating to initramfs. This is only a rule of thumb, however.</li>
</ul>
<h2 id="about-my-system" class="relative group">About my System <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#about-my-system" aria-label="Anchor">#</a></span></h2><p>I am running Ubuntu server 22.04 Noble Numbat. Most of my critical software runs in k3s running on my Ubuntu server. A few things, like some USB utilities, samba, and ZFS run directly on the host. I am also using LVM with LUKS full-disk encryption, and I have some utilities including dropbear to allow me to unlock it over SSH. Most of my userspace administration utilities and dev tools are installed with homebrew.</p>
<h2 id="procedure-and-results" class="relative group">Procedure and Results <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#procedure-and-results" aria-label="Anchor">#</a></span></h2><p>Beginning the process, I put my network into backup mode, so that it remains usable (mostly just switching over my DNS to my secondary). Read the instructions on <a href="https://ubuntu.com/server/docs/how-to-upgrade-your-release" target="_blank" rel="noreferrer">here</a>, did a pre-upgrade reboot, and initiated a <code>do-release-upgrade</code> over SSH.</p>
<p><code>do-release-upgrade</code> began nicely; packages downloaded quickly. The actual upgrades took longer, but that is not unexpected.</p>
<p>Any time there is a conflicting file, I am choosing to keep the currently-installed version. <strong>For anyone unsure about how to answer these questions, I would suggest always choosing &ldquo;no&rdquo;, because the current settings are likely to be important for your machine to function as you expect.</strong> That is not always correct, and your case may vary—I just think that&rsquo;s good advice for a default. Places this occurred:</p>
<ul>
<li>sysctl</li>
<li>initramfs</li>
<li>nut</li>
<li>samba</li>
<li>dropbear</li>
<li>sshd</li>
<li>zfs/zed</li>
<li>tuned</li>
</ul>
<p>When setting up Samba, there was an error invoking systemctl. During the upgrade process, this resulted in the samba units failing. it is not yet clear if this has had an impact post-upgrade.</p>
<p>This entire process took about 20 minutes after starting do-release-upgrade.</p>
<p>180 Packages were removed after the upgrade. This took about 2 minutes. The system rebooted. The dropbear LUKS unlock seemed to work normally. The machine comes up in about the same time as before, and all systemd services are working as expected.</p>
<p>I was able to install the tailscale apt repository by simply using the <code>.distUpgrade</code> file and <code>s/jammy/noble/g</code>.</p>

      </div>
    </section>
    <footer class="max-w-prose pt-8 print:hidden">
      
  <div class="flex">
    
    
    
    <div class="place-self-center">
      
      
      <div class="text-2xl sm:text-lg">
</div>
    </div>
  </div>


      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
        </span>
        <span>
          
            <a class="group flex text-right" href="/2015/09/23/Excerpts-from-Apple%27s-Review-Guidelines/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Excerpts from Apple's Review Guidelines</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2015-09-23 00:00:00 &#43;0000 UTC">September 23, 2015</time>
                  
                </span>
              </span>
              <span
                class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[-2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
                ><span class="ltr:inline rtl:hidden">&rarr;</span
                ><span class="ltr:hidden rtl:inline">&larr;</span></span
              >
            </a>
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

      </main>
      
        <div
          class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"
          id="to-top"
          hidden="true"
        >
          <a
            href="#the-top"
            class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
            aria-label="Scroll to top"
            title="Scroll to top"
          >
            &uarr;
          </a>
        </div>
      <footer class="py-10 print:hidden">
  
  
  <div class="flex items-center justify-between">
    <div>
      
      
        <p class="text-sm text-neutral-500 dark:text-neutral-400">
            &copy;
            2024
            
        </p>
      
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://github.com/jpanther/congo" target="_blank" rel="noopener noreferrer">Congo</a>
        </p>
      
    </div>
    <div class="flex flex-row items-center">
      
      
      
      
    </div>
  </div>
  
  
</footer>

    </div>
  </body>
</html>
