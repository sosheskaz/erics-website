






<!doctype html>
<html
  lang="en-us"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"
><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#FFFFFF" />
  
  <title>Duplicity: The Best Free Backup Software &middot; Eric&#39;s Web.site</title>
    <meta name="title" content="Duplicity: The Best Free Backup Software &middot; Eric&#39;s Web.site" />
  
  
  
  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js"
    integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="
  ></script>
  
  
  
  
  
  
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.b0785c8131a75f72b211435af86269eb2d4b81dda03a8f2cf5ccb1c967747167.css"
    integrity="sha256-sHhcgTGnX3KyEUNa&#43;GJp6y1Lgd2gOo8s9cyxyWd0cWc="
  />
  
  
  
  
  
  
  
  <meta
    name="description"
    content="
      
        Lately, I&rsquo;ve been looking into backups a lot. At one point, I even looked into setting up a

        
      Time Machine Server on my FreeBSD machine.
That said, it&rsquo;s all been a headache that sometimes works and sometimes doesn&rsquo;t. Now, however, I&rsquo;ve
discovered Duplicity, a GPL software package, powered by python,
that is feature-heavy, simple, reliable, and fast.
Features of Duplicity #
Relatively easy to automate
Encrypts your backups by default
Compresses your backups by default
Takes incremental backups
Can self-heal if a backup goes wrong
Allows incremental restoration from backups
Supports a lot of different protocols
Supports AWS S3 very well by default.

A list of duplicity&rsquo;s supported protocols:
      
    "
  />
  
  
  
  <link rel="canonical" href="http://localhost:1313/2018/03/07/Duplicity/" />
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:url" content="http://localhost:1313/2018/03/07/Duplicity/">
  <meta property="og:site_name" content="Eric&#39;s Web.site">
  <meta property="og:title" content="Duplicity: The Best Free Backup Software">
  <meta property="og:description" content="Lately, I’ve been looking into backups a lot. At one point, I even looked into setting up a Time Machine Server on my FreeBSD machine. That said, it’s all been a headache that sometimes works and sometimes doesn’t. Now, however, I’ve discovered Duplicity, a GPL software package, powered by python, that is feature-heavy, simple, reliable, and fast.
Features of Duplicity # Relatively easy to automate Encrypts your backups by default Compresses your backups by default Takes incremental backups Can self-heal if a backup goes wrong Allows incremental restoration from backups Supports a lot of different protocols Supports AWS S3 very well by default. A list of duplicity’s supported protocols:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2018-03-07T00:00:00+00:00">
    <meta property="article:modified_time" content="2018-03-07T00:00:00+00:00">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Duplicity: The Best Free Backup Software">
  <meta name="twitter:description" content="Lately, I’ve been looking into backups a lot. At one point, I even looked into setting up a Time Machine Server on my FreeBSD machine. That said, it’s all been a headache that sometimes works and sometimes doesn’t. Now, however, I’ve discovered Duplicity, a GPL software package, powered by python, that is feature-heavy, simple, reliable, and fast.
Features of Duplicity # Relatively easy to automate Encrypts your backups by default Compresses your backups by default Takes incremental backups Can self-heal if a backup goes wrong Allows incremental restoration from backups Supports a lot of different protocols Supports AWS S3 very well by default. A list of duplicity’s supported protocols:">

  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Duplicity: The Best Free Backup Software",
    "headline": "Duplicity: The Best Free Backup Software",
    
    "abstract": "\u003cp\u003eLately, I\u0026rsquo;ve been looking into backups a lot. At one point, I even looked into setting up a\n\n        \n      \u003ca href=\u0022\/Tutorial\/2017-12-12-Time-Machine-with-FreeBSD.md\u0022\u003eTime Machine Server\u003c\/a\u003e on my FreeBSD machine.\nThat said, it\u0026rsquo;s all been a headache that sometimes works and sometimes doesn\u0026rsquo;t. Now, however, I\u0026rsquo;ve\ndiscovered \u003ca href=\u0022https:\/\/launchpad.net\/duplicity\u0022 target=\u0022_blank\u0022 rel=\u0022noreferrer\u0022\u003eDuplicity\u003c\/a\u003e, a GPL software package, powered by python,\nthat is feature-heavy, simple, reliable, and \u003cem\u003efast\u003c\/em\u003e.\u003c\/p\u003e\n\u003ch2 id=\u0022features-of-duplicity\u0022 class=\u0022relative group\u0022\u003eFeatures of Duplicity \u003cspan class=\u0022absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100\u0022\u003e\u003ca class=\u0022group-hover:text-primary-300 dark:group-hover:text-neutral-700\u0022 style=\u0022text-decoration-line: none !important;\u0022 href=\u0022#features-of-duplicity\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\u003c\/span\u003e\u003c\/h2\u003e\u003cul\u003e\n\u003cli\u003eRelatively easy to automate\u003c\/li\u003e\n\u003cli\u003eEncrypts your backups by default\u003c\/li\u003e\n\u003cli\u003eCompresses your backups by default\u003c\/li\u003e\n\u003cli\u003eTakes incremental backups\u003c\/li\u003e\n\u003cli\u003eCan self-heal if a backup goes wrong\u003c\/li\u003e\n\u003cli\u003eAllows incremental restoration from backups\u003c\/li\u003e\n\u003cli\u003eSupports a lot of different protocols\u003c\/li\u003e\n\u003cli\u003eSupports AWS S3 very well by default.\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cp\u003eA list of duplicity\u0026rsquo;s supported protocols:\u003c\/p\u003e",
    "inLanguage": "en-us",
    "url" : "http:\/\/localhost:1313\/2018\/03\/07\/Duplicity\/",
    "author" : {
      "@type": "Person",
      "name": "Eric Miller"
    },
    "copyrightYear": "2018",
    "dateCreated": "2018-03-07T00:00:00\u002b00:00",
    "datePublished": "2018-03-07T00:00:00\u002b00:00",
    
    "dateModified": "2018-03-07T00:00:00\u002b00:00",
    
    "keywords": ["backup","duplicity","python","freebsd"],
    
    "mainEntityOfPage": "true",
    "wordCount": "951"
  }
  </script>
    
    <script type="application/ld+json">
    {
   "@context": "https://schema.org",
   "@type": "BreadcrumbList",
   "itemListElement": [
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/",
       "name": "Index",
       "position": 1
     },
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/posts/",
       "name": "Posts",
       "position": 2
     },
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/categories/tutorial/",
       "name": "Tutorial",
       "position": 3
     },
     {
       "@type": "ListItem",
       "name": "Duplicity the Best Free Backup Software",
       "position": 4
     }
   ]
 }
  </script>

  
  <meta name="author" content="Eric Miller" />
  
    
      <link href="https://github.com/sosheskaz/" rel="me" />
    
  
  
  






  
  

  
  
</head>
<body
    class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content"
        ><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span
        >Skip to main content</a
      >
    </div>
    
    
      <header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden">
  <nav class="flex items-start justify-between sm:items-center">
    
    <div class="flex flex-row items-center">
      
  <a
    class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
    rel="me"
    href="/"
    >Eric&rsquo;s Web.site</a
  >

    </div>
    
    
      <ul class="flex list-none flex-col text-end sm:flex-row">
        
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/posts/"
                  title="Posts"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >All Posts</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/categories/"
                  title="Categories"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Categories</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/profile/"
                  title="About Me"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >About</span
                    >
                  </a
                >
              
            </li>
          
          
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex grow flex-col">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
        <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="hidden inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="/"
      >Index</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class=" inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="/posts/"
      >Posts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="hidden inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="/2018/03/07/Duplicity/"
      >Duplicity: The Best Free Backup Software</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


      
      <h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Duplicity: The Best Free Backup Software
      </h1>
      
        <div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
          





  
  



  

  
  
    
  

  

  

  
    
  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2018-03-07 00:00:00 &#43;0000 UTC">March 7, 2018</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">5 mins</span>
    

    
    
  </div>

  
  


        </div>
      
      
    </header>
    <section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row">
      
      <div class="min-h-0 min-w-0 max-w-prose grow">
        <p>Lately, I&rsquo;ve been looking into backups a lot. At one point, I even looked into setting up a

        
      <a href="/Tutorial/2017-12-12-Time-Machine-with-FreeBSD.md">Time Machine Server</a> on my FreeBSD machine.
That said, it&rsquo;s all been a headache that sometimes works and sometimes doesn&rsquo;t. Now, however, I&rsquo;ve
discovered <a href="https://launchpad.net/duplicity" target="_blank" rel="noreferrer">Duplicity</a>, a GPL software package, powered by python,
that is feature-heavy, simple, reliable, and <em>fast</em>.</p>
<h2 id="features-of-duplicity" class="relative group">Features of Duplicity <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#features-of-duplicity" aria-label="Anchor">#</a></span></h2><ul>
<li>Relatively easy to automate</li>
<li>Encrypts your backups by default</li>
<li>Compresses your backups by default</li>
<li>Takes incremental backups</li>
<li>Can self-heal if a backup goes wrong</li>
<li>Allows incremental restoration from backups</li>
<li>Supports a lot of different protocols</li>
<li>Supports AWS S3 very well by default.</li>
</ul>
<p>A list of duplicity&rsquo;s supported protocols:</p>
<ul>
<li>acd_cli</li>
<li>Amazon S3</li>
<li>Backblaze B2</li>
<li>Copy.com</li>
<li>DropBox</li>
<li>ftp</li>
<li>GIO</li>
<li>Google Docs</li>
<li>Google Drive</li>
<li>HSI</li>
<li>Hubic</li>
<li>IMAP</li>
<li>local filesystem</li>
<li>Mega.co</li>
<li>Microsoft Azure</li>
<li>Microsoft Onedrive</li>
<li>par2</li>
<li>Rackspace Cloudfiles</li>
<li>rsync</li>
<li>Skylabel</li>
<li>ssh/scp</li>
<li>SwiftStack</li>
<li>Tahoe-LAFS</li>
<li>WebDAV</li>
</ul>
<h2 id="security-considerations" class="relative group">Security Considerations <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#security-considerations" aria-label="Anchor">#</a></span></h2><p>Backups are a potentially huge security liability, because they can contain a lot of sensitive
information. Lots of times we want to back up information <em>because</em> it is sensitive. So we need to
consider the ramifications of our backup system. In particular, there are three systems we need to
consider when using duplicity.</p>
<ol>
<li>The source machine</li>
<li>Data in transit</li>
<li>The backup server</li>
</ol>
<p>Part of the key to ensuring good security is having sensible assumptions about the state and
security of your system. These assumptions depend on the nature of the machines in use, the nature
of the network, and whether you&rsquo;re using full disk encryption on the source and target machines.
Here are some assumptions I&rsquo;m working with, if they&rsquo;re not true for you, then adjust your security
measures appropriately.</p>
<ol>
<li>I am using duplicity&rsquo;s built-in PGP encryption. This protects the data on the target machine and in-transit.</li>
<li>Access to the source and target machines is restricted.</li>
</ol>
<p>These two assumptions allow a generous amount of leeway in how we handle things. That said, they&rsquo;re
really a bare minimum for confidentiality, and do not necessarily guarantee integrity. Using a
secure transit protocol, like SFTP or S3, solves many of these problems. If you&rsquo;re using FTP over
the internet for example, you&rsquo;re wide-open to a man-in-the-middle attack. For that reason, I
recommend using a protocol that is already encrypted and password-protected.</p>
<h2 id="basic-duplicity-usage" class="relative group">Basic Duplicity Usage <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#basic-duplicity-usage" aria-label="Anchor">#</a></span></h2><p>I have a script template that I use for my duplicity backups. I currently use a cloud solution for
file synchronization and offsite backups, and duplicity for larger local backups of size up to
about 200GB. My ISP has a data limit, so backing up to S3 would be impractical. Another thing to
consider if you&rsquo;re considering using S3 is cost – S3 costs $0.023 per gigabyte per month, which
gets expensive. If you want offsite backups, here&rsquo;s a quick price comparison.</p>
<table>
  <thead>
      <tr>
          <th>Service</th>
          <th>Storage</th>
          <th>Price/GB/month</th>
          <th>Price/month</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>AWS S3</td>
          <td>15GB</td>
          <td>$0.023</td>
          <td>$0.34</td>
      </tr>
      <tr>
          <td>AWS S3</td>
          <td>50GB</td>
          <td>$0.023</td>
          <td>$1.30</td>
      </tr>
      <tr>
          <td>AWS S3</td>
          <td>100GB</td>
          <td>$0.023</td>
          <td>$2.30</td>
      </tr>
      <tr>
          <td>AWS S3</td>
          <td>200GB</td>
          <td>$0.023</td>
          <td>$4.60</td>
      </tr>
      <tr>
          <td>AWS S3</td>
          <td>500GB</td>
          <td>$0.023</td>
          <td>$11.50</td>
      </tr>
      <tr>
          <td>AWS S3</td>
          <td>1TB</td>
          <td>$0.023</td>
          <td>$23.00</td>
      </tr>
      <tr>
          <td>AWS S3</td>
          <td>10TB</td>
          <td>$0.023</td>
          <td>$230.00</td>
      </tr>
      <tr>
          <td>Google Drive</td>
          <td>15G</td>
          <td>Free</td>
          <td>$0</td>
      </tr>
      <tr>
          <td>Google Drive</td>
          <td>100GB</td>
          <td>$0.0199</td>
          <td>$1.99</td>
      </tr>
      <tr>
          <td>Google Drive</td>
          <td>1TB</td>
          <td>$0.0100</td>
          <td>$9.99</td>
      </tr>
      <tr>
          <td>Google Drive</td>
          <td>10TB</td>
          <td>$0.0100</td>
          <td>$99.99</td>
      </tr>
      <tr>
          <td>DropBox</td>
          <td>1TB</td>
          <td>$0.00825</td>
          <td>$8.25</td>
      </tr>
      <tr>
          <td>OneDrive</td>
          <td>50GB</td>
          <td>$0.398</td>
          <td>$1.99</td>
      </tr>
      <tr>
          <td>OneDrive</td>
          <td>1TB</td>
          <td>$0.00699</td>
          <td>$6.99</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e"># Duplicity needs an environment variable or arg to decrypt. This is the best way of doing that.</span>
</span></span><span style="display:flex;"><span>export PASSPHRASE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;top_secret_password_for_encryption&#34;</span>
</span></span><span style="display:flex;"><span>cd $HOME
</span></span><span style="display:flex;"><span>backup_excludes<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;--exclude ./relative/path/1 --exclude ./relative/path/2&#34;</span>
</span></span><span style="display:flex;"><span>backup_targets<span style="color:#f92672">=</span>$HOME
</span></span><span style="display:flex;"><span>backup_server<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;192.168.x.y&#39;</span>
</span></span><span style="display:flex;"><span>backup_server_proto<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;sftp&#39;</span>
</span></span><span style="display:flex;"><span>backup_server_port<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;22&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Generate a path based on our user and hostname. Ideally, this means there&#39;s a unique backup</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># namespace for every user on every machine you need to worry about. Adjust this to meet your needs.</span>
</span></span><span style="display:flex;"><span>backup_server_path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/home/</span><span style="color:#66d9ef">$(</span>whoami<span style="color:#66d9ef">)</span><span style="color:#e6db74">/backups/</span><span style="color:#66d9ef">$(</span>whoami<span style="color:#66d9ef">)</span><span style="color:#e6db74">.</span><span style="color:#66d9ef">$(</span>hostname | cut -d <span style="color:#e6db74">&#39;.&#39;</span> -f 1<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>backup_dest<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>backup_server_proto<span style="color:#e6db74">}</span><span style="color:#e6db74">://</span><span style="color:#e6db74">${</span>backup_server<span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span>backup_server_port<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">${</span>backup_server_path<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>backup_parameters<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$backup_excludes<span style="color:#e6db74"> . </span><span style="color:#e6db74">${</span>backup_dest<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ulimit -n <span style="color:#ae81ff">1024</span> <span style="color:#75715e"># necessary on mac, on some linux distros</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Build the commands we&#39;re going to run in advance.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The first command checks if there&#39;s a backup done within the last two weeks.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   If so, does an incremental backup. If not, do a full backup.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The second command removes any backups older than 2 weeks to save space.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   If a full backup doesn&#39;t exist that&#39;s newer than the last two weeks, it doesn&#39;t delete the full</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   backup, just the incremental backups that have occurred since then.</span>
</span></span><span style="display:flex;"><span>full_if_old<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;incr --full-if-older-than 14D </span><span style="color:#e6db74">${</span>backup_parameters<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>remove_if_old<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;remove-older-than 14D </span><span style="color:#e6db74">${</span>backup_dest<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>incr<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;incr </span><span style="color:#e6db74">${</span>backup_parameters<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Print out the commands we&#39;re running to make debugging easier</span>
</span></span><span style="display:flex;"><span>echo duplicity <span style="color:#e6db74">${</span>full_if_old<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>duplicity <span style="color:#e6db74">${</span>full_if_old<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>echo duplicity <span style="color:#e6db74">${</span>remove_if_old<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>duplicity <span style="color:#e6db74">${</span>remove_if_old<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>unset PASSPHRASE
</span></span></code></pre></div><p>This script is designed to be <em>relatively</em> portable for different protocols and machines.
You may need some adjustments (for example, for the service authentication, or for some protocols'
sensitivities to file paths or hosts). Notably, this won&rsquo;t work for the <code>s3://</code> protocol because it
doesn&rsquo;t have access to AWS credentials, and it won&rsquo;t work for the <code>file://</code> protocol because it
forces you to use a hostname and port. These are relatively easy adjustments though.</p>
<h3 id="fetching-duplicity-info" class="relative group">Fetching Duplicity Info <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#fetching-duplicity-info" aria-label="Anchor">#</a></span></h3><p>Using the same variables as above:</p>
<p><code>duplicity collection-status ${backup_dest}</code> lists the backups that are available.</p>
<p><code>duplicity restore ${backup_dest} ./local-folder</code> will restore the entire backup to the given
folder. Be aware that if the local folder is not empty, duplicity will throw an error.</p>
<p><code>duplicity restore -t 1D --file-to-restore specific_file.txt ${backup_dest} restored-specific-file.txt</code>
will restore a single <code>specific_file.txt</code> to the state it was in one day ago, and put the result in
<code>restored-specific-file.txt</code> in the current directory.</p>
<p><code>duplicity list ${backup_dest}</code> will list all of the files that were backed up.</p>
<p>Many of the options, like <code>-t</code> (restore time), can be used for various commands.</p>
<h2 id="in-closing" class="relative group">In Closing <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#in-closing" aria-label="Anchor">#</a></span></h2><p>Duplicity is a very viable, effective, free, and portable backup solution. It does have its
downsides (single-threaded file access, currently somewhat inefficient) but for most people those
issues won&rsquo;t matter. I use it personally because of its backups and efficiency.</p>

      </div>
    </section>
    <footer class="max-w-prose pt-8 print:hidden">
      
  <div class="flex">
    
    
    
      
      
    
    <div class="place-self-center">
      
        <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
          Author
        </div>
        <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
          Eric Miller
        </div>
      
      
        <div class="text-sm text-neutral-700 dark:text-neutral-400">Software Engineer, Kuberneter</div>
      
      <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
          style="will-change:transform;"
          href="https://github.com/sosheskaz/"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></a
        >
      
    
  </div>

</div>
    </div>
  </div>


      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="group flex" href="/2018/02/20/The-Case-of-the-Circular-Dependency/">
              <span
                class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
                ><span class="ltr:inline rtl:hidden">&larr;</span
                ><span class="ltr:hidden rtl:inline">&rarr;</span></span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >The Case of the Circular Dependency</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2018-02-20 00:00:00 &#43;0000 UTC">February 20, 2018</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="group flex text-right" href="/2018/04/04/General-Purpose-Computing/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >General Purpose Computing – Then and Now</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2018-04-04 00:00:00 &#43;0000 UTC">April 4, 2018</time>
                  
                </span>
              </span>
              <span
                class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[-2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
                ><span class="ltr:inline rtl:hidden">&rarr;</span
                ><span class="ltr:hidden rtl:inline">&larr;</span></span
              >
            </a>
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

      </main>
      
        <div
          class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"
          id="to-top"
          hidden="true"
        >
          <a
            href="#the-top"
            class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
            aria-label="Scroll to top"
            title="Scroll to top"
          >
            &uarr;
          </a>
        </div>
      <footer class="py-10 print:hidden">
  
  
  <div class="flex items-center justify-between">
    <div>
      
      
        <p class="text-sm text-neutral-500 dark:text-neutral-400">
            &copy;
            2025
            Eric Miller
        </p>
      
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://github.com/jpanther/congo" target="_blank" rel="noopener noreferrer">Congo</a>
        </p>
      
    </div>
    <div class="flex flex-row items-center">
      
      
      
      
    </div>
  </div>
  
  
</footer>

    </div>
  </body>
</html>
